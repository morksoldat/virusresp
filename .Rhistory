setwd("MEGAsync/Infecto/Proyecto Investigaci√≥n/VirusRepsApp/datos antiguos/fuente de datos/")
library(plyr)
library(lubridate)
library(ggplot2)
lab <- read.csv("virus semana 27 nov al 03 dic 2017  UC.csv")
lab$FECHA_OA <- as.Date(lab$FECHA_OA, format="%d/%m/%Y")
lab$FECHA_NAC <- as.Date(lab$FECHA_NAC, format="%d/%m/%Y")
## Trarudciendo y unificando variables
lab$RESULTADO <- revalue(lab$RESULTADO, c("POSITIVO"="Positivo"))
lab$VIRUS<- revalue(lab$VARIABLE, c("ADENO"="ADV", "ADENOVIR"="ADV", "ADENOVIRUS"="ADV",
"CHLAMYDO"="CHLAMY",
"CORO229E"="CORO", "COROHKU1"="CORO", "CORONL63"="CORO", "COROOC43"="CORO",
"VIRINFA"="INFA", "FLUARAPA"="INFA", "INFAH1"="INFA", "INFAH3"="INFA", "INFLUA"="INFA", "INFLUAH1"="INFA", "INFLUAH12009"="INFA", "INFLUAH3"="INFA",
"FLUARAPB"="INFB", "INFLUB"="INFB", "VIRINFB"="INFB",
"VIRPARAINF1"="PARAINFL", "VIRPARAINF2"="PARAINFL", "VIRPARAINF3"="PARAINFL",
"PARAINF1"="PARAINFL", "PARAINF2"="PARAINFL", "PARAINF3"="PARAINFL",
"METAPNEU"="MNV", "METAPNEUMO"="MNV",
"SINCICIAL"="VRS", "TPACKVSR"="VRS", "VRSA"="VRS", "VRSB"="VRS"
))
lab <- read.csv("virus semana 27 nov al 03 dic 2017  UC.csv")
lab$FECHA_OA <- as.Date(lab$FECHA_OA, format="%d/%m/%Y")
lab$FECHA_NAC <- as.Date(lab$FECHA_NAC, format="%d/%m/%Y")
## Trarudciendo y unificando variables
lab$RESULTADO <- revalue(lab$RESULTADO, c("POSITIVO"="Positivo"))
lab$VIRUS<- revalue(lab$VARIABLE, c("ADENO"="ADV", "ADENOVIR"="ADV", "ADENOVIRUS"="ADV",
"CHLAMYDO"="CHLAMY",
"CORO229E"="CORO", "COROHKU1"="CORO", "CORONL63"="CORO", "COROOC43"="CORO",
"VIRINFA"="INFA", "FLUARAPA"="INFA", "INFAH1"="INFA", "INFAH3"="INFA", "INFLUA"="INFA", "INFLUAH1"="INFA", "INFLUAH12009"="INFA", "INFLUAH3"="INFA",
"FLUARAPB"="INFB", "INFLUB"="INFB", "VIRINFB"="INFB",
"VIRPARAINF1"="PARAINFL", "VIRPARAINF2"="PARAINFL", "VIRPARAINF3"="PARAINFL",
"PARAINFL1"="PARAINFL", "PARAINFL2"="PARAINFL", "PARAINFL3"="PARAINFL",
"METAPNEU"="MNV", "METAPNEUMO"="MNV",
"SINCICIAL"="VRS", "TPACKVSR"="VRS", "VRSA"="VRS", "VRSB"="VRS"
))
#calculando edades
lab$edad1 <- as.duration(interval(lab$FECHA_NAC,lab$FECHA_OA))%/% as.duration(years(1))
ggplot(lab, aes(PROCED, fill=VIRUS))+
geom_bar(stat="count", position=position_dodge())
lab <- read.csv("virus semana 27 nov al 03 dic 2017  UC.csv")
lab$FECHA_OA <- as.Date(lab$FECHA_OA, format="%d/%m/%Y")
lab$FECHA_NAC <- as.Date(lab$FECHA_NAC, format="%d/%m/%Y")
## Trarudciendo y unificando variables
lab$RESULTADO <- revalue(lab$RESULTADO, c("POSITIVO"="Positivo"))
lab$VIRUS<- revalue(lab$VARIABLE, c("ADENO"="ADV", "ADENOVIR"="ADV", "ADENOVIRUS"="ADV",
"CHLAMYDO"="CHLAMY",
"CORO229E"="CORO", "COROHKU1"="CORO", "CORONL63"="CORO", "COROOC43"="CORO",
"VIRINFA"="INFA", "FLUARAPA"="INFA", "INFAH1"="INFA", "INFAH3"="INFA", "INFLUA"="INFA", "INFLUAH1"="INFA", "INFLUAH12009"="INFA", "INFLUAH3"="INFA",
"FLUARAPB"="INFB", "INFLUB"="INFB", "VIRINFB"="INFB",
"VIRPARAINF1"="PARAINFL", "VIRPARAINF2"="PARAINFL", "VIRPARAINF3"="PARAINFL",
"PARAINFL1"="PARAINFL", "PARAINFL2"="PARAINFL", "PARAINFL3"="PARAINFL", "PARAINFL4"="PARAINFL",
"METAPNEU"="MNV", "METAPNEUMO"="MNV",
"SINCICIAL"="VRS", "TPACKVSR"="VRS", "VRSA"="VRS", "VRSB"="VRS"
))
#calculando edades
lab$edad1 <- as.duration(interval(lab$FECHA_NAC,lab$FECHA_OA))%/% as.duration(years(1))
ggplot(lab, aes(PROCED, fill=VIRUS))+
geom_bar(stat="count", position=position_dodge())
subset(lab, VIRUS=="ADV")
# Virus Tradicionales
subset(lab, VIRUS=="ADV" | VIRUS=="INFA" | VIRUS=="INFB" | VIRUS=="VRS" | VIRUS=="PARAINFL" | VIRUS=="MNV" |)
# Virus Tradicionales
subset(lab, VIRUS=="ADV" | VIRUS=="INFA" | VIRUS=="INFB" | VIRUS=="VRS" | VIRUS=="PARAINFL" | VIRUS=="MNV" )
#calculando edades
lab$edad1 <- as.duration(interval(lab$FECHA_NAC,lab$FECHA_OA))%/% as.duration(years(1))
# Virus Tradicionales
lab_trad <- subset(lab, VIRUS=="ADV" | VIRUS=="INFA" | VIRUS=="INFB" | VIRUS=="VRS" | VIRUS=="PARAINFL" | VIRUS=="MNV" )
ggplot(lab_trad, aes(PROCED, fill=VIRUS))+
geom_bar(stat="count", position=position_dodge())
subset(lab, VIRUS=="ROTA")
View(lab)
subset(lab, VIRUS=="ROTAVIR")
# Virus Tradicionales
lab_trad <- subset(lab, VIRUS=="ADV" | VIRUS=="INFA" | VIRUS=="INFB" | VIRUS=="VRS" | VIRUS=="PARAINFL" | VIRUS=="MNV" & RESULTADO=="Positivo" )
ggplot(lab_trad, aes(PROCED, fill=VIRUS))+
geom_bar(stat="count", position=position_dodge())
subset(lab, VIRUS=="ADV" | VIRUS=="INFA" | VIRUS=="INFB" | VIRUS=="VRS" | VIRUS=="PARAINFL" | VIRUS=="MNV" & RESULTADO=="Positivo" )
subset(lab, RESULTADO=="Positivo")
subset(lab_trad, RESULTADO=="Positivo")
## Seleccionar solo positivos
# lab_trad <- subset(lab_trad, RESULTADO=="Positivo")
lab_notrad <- subset(lab, VIRUS=="ADV" | VIRUS=="RINO/ENT" | VIRUS=="CORO" | VIRUS=="BOCAV" )
ggplot(lab_notrad, aes(PROCED, fill=VIRUS))+
geom_bar(stat="count", position=position_dodge())
setwd("../../Prueba 1/")
library(shiny)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
?reactive
runApp()
runApp()
runApp()
runApp()
runApp()
substitute("lab")
substitute(lab)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
View(lab_trad)
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
